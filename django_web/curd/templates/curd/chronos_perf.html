{% extends 'curd/base.html' %}
{% load static %}
{% block title %}
    <title>Chronos-Performance</title>
{% endblock title %}

{% block content %}
    <div class="card mb-4">

          <div class="card-header"> Performance</div>

          <div class="card-body">
            <!-- 表单 -->
            <form class="was-validated" method="get" action="{% url 'chronos_performance_view' %}">
              <!-- 选择框 -->
              <div class="row g-2">
                <div class="col-md">
                  <select class="form-multi-select" id="platform" data-coreui-multiple="false">
                    <option value="icl" name="platform">ICL</option>
                    <option value="spr" name="platform">SPR</option>
                  </select>
                </div>
                <div class="col-md">
                  <select class="form-multi-select" id="models" multiple data-coreui-selection-type="text" data-coreui-search="true" data-coreui-placeholder="Model">
                    <option value="lstm" name="models" selected>LSTM</option>
                    <option value="seq2seq" name="models">Seq2Seq</option>
                    <option value="tcn" name="models">TCN</option>
                    <option value="mtnet" name="models">MTNet</option>
                    <option value="prophet" name="models">Prophet</option>
                    <option value="arima" name="models">ARIMA</option>
                  </select>
                  <div class="invalid-feedback">Cannot be empty</div>
                </div>
                <div class="col-md">
                  <select class="form-multi-select" id="framework" data-coreui-multiple="false">
                    <option value="pytorch_with" name="framework">PyTorch with AutoML</option>
                    <option value="pytorch_without" name="framework">PyTorch without AutoML</option>
                    <option value="onnx_without" name="framework">ONNX without AutoML</option>
                    <option value="openvino_without" name="framework">OpenVINO without AutoML</option>
                  </select>
                </div>
                <div class="col-md">
                  <select class="form-multi-select" id="date" data-coreui-multiple="false">
                    <option value="1" name="date" selected>2022-01-01</option>
                  </select>
                </div>
                <button type="button" class="btn btn-outline-dark" onclick="chronos_perf()">Select</button>
              </div>
            </form>

            <!-- 页面展示表格 -->
            <div class="tab-content rounded-bottom">
              <div class="tab-pane p-3 active preview" role="tabpanel" id="preview-277">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th scope="col">Platform</th>
                      <th scope="col">Model</th>
                      <th scope="col">Model precision</th>
                      <th scope="col">look_back / horizon</th>
                      <th scope="col">Training Time</th>
                      <th scope="col">Throughput</th>
                      <th scope="col">Latency</th>
                      <th scope="col">AutoML</th>
                    </tr>
                  </thead>
                  <tbody class="table-group-divider">
                    <tr>
                      <th scope="row">ICL</th>
                      <td>Seq2Seq</td>
                      <td>FP32</td>
                      <td>Single-step84->1</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>YEs</td>
                    </tr>
                    <tr>
                      <th scope="row">ICL</th>
                      <td>Seq2Seq</td>
                      <td>FP32</td>
                      <td>Single-step84->1</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>YES</td>
                    </tr>
                    <tr>
                      <th scope="row">ICL</th>
                      <td>Seq2Seq</td>
                      <td>FP32</td>
                      <td>Single-step84->1</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>Cell</td>
                      <td>Yes</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

        </div>
{% endblock content %}

{% block script %}
    <script>

        let platform = document.getElementById('platform').value;
        let framework = document.getElementById('framework').value;
        let date = document.getElementById('date').value;
        function chronos_perf() {

            $.ajax({
                type:'GET',
                url:'{% url 'chronos_performance_view' %}',
                traditional: true,
                data:{'platform':platform,'models':$('#models').val(),'framework':framework,'date':date},
                dataType:'json',
                success: function (res) {
                    console.log("ok");
                }
            })
        }

    </script>
{% endblock script %}
